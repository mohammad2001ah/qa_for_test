<!DOCTYPE html>
<!-- BUG-027: Page title says "Untitled Document" -->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Untitled Document</title><!-- BUG-027 -->
    <meta name="description" content="ShopBuggy — Your one-stop beauty & lifestyle store.">
    <style>
        /* ===== RESET & BASE ===== */
        *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; color: #333; background: #f5f5f5; line-height: 1.6; }
        a { text-decoration: none; color: inherit; }
        ul { list-style: none; }
        img { max-width: 100%; display: block; }
        button, input, select, textarea { font-family: inherit; font-size: inherit; }

        /* ===== HEADER ===== */
        .site-header { position: sticky; top: 0; z-index: 1000; background: #1a1a2e; color: #fff; padding: 12px 30px; display: flex; align-items: center; justify-content: space-between; }
        .logo { font-size: 1.6rem; font-weight: 700; letter-spacing: 1px; }
        .logo span { color: #e94560; }
        .header-search { flex: 1; max-width: 420px; margin: 0 30px; position: relative; }
        .header-search input { width: 100%; padding: 9px 40px 9px 14px; border: none; border-radius: 20px; font-size: .95rem; outline: none; }
        .header-search button { position: absolute; right: 4px; top: 50%; transform: translateY(-50%); background: #e94560; border: none; color: #fff; width: 32px; height: 32px; border-radius: 50%; cursor: pointer; font-size: 1rem; }
        .header-actions { display: flex; align-items: center; gap: 18px; }
        .header-actions a { color: #fff; font-size: .9rem; cursor: pointer; }
        .cart-icon { position: relative; font-size: 1.3rem; cursor: pointer; }
        .cart-count { position: absolute; top: -8px; right: -10px; background: #e94560; color: #fff; font-size: .7rem; width: 18px; height: 18px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: 700; }

        /* ===== NAV ===== */
        .main-nav { background: #16213e; padding: 0 30px; }
        .main-nav ul { display: flex; gap: 0; }
        .main-nav li a { display: block; padding: 12px 20px; color: #ccc; font-size: .9rem; transition: background .2s, color .2s; }
        .main-nav li a:hover, .main-nav li a.active { background: #e94560; color: #fff; }
        /* BUG-023: hamburger visible on desktop because of min-width instead of max-width */
        .hamburger { display: none; background: none; border: none; color: #fff; font-size: 1.5rem; cursor: pointer; padding: 10px; }
        @media (min-width: 768px) { /* BUG-023: should be max-width */
            .hamburger { display: block; }
        }

        /* ===== HERO ===== */
        .hero { background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%); color: #fff; text-align: center; padding: 70px 30px; }
        .hero h1 { font-size: 2.6rem; margin-bottom: 12px; }
        .hero p { font-size: 1.15rem; color: #ccc; margin-bottom: 25px; }
        .hero-btn { display: inline-block; padding: 12px 36px; background: #e94560; color: #fff; border: none; border-radius: 25px; font-size: 1rem; font-weight: 600; cursor: pointer; transition: background .3s; }
        .hero-btn:hover { background: #c73651; }

        /* ===== PRODUCT GRID ===== */
        .section-title { text-align: center; font-size: 1.6rem; margin: 40px 0 10px; color: #1a1a2e; }
        .section-subtitle { text-align: center; color: #888; margin-bottom: 25px; font-size: .95rem; }
        .sort-bar { display: flex; justify-content: flex-end; padding: 0 40px; margin-bottom: 10px; }
        .sort-bar select { padding: 6px 12px; border: 1px solid #ccc; border-radius: 4px; font-size: .9rem; }
        .product-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 25px; padding: 0 40px 40px; max-width: 1200px; margin: 0 auto; }
        .product-card { background: #fff; border-radius: 10px; overflow: hidden; box-shadow: 0 2px 12px rgba(0,0,0,.08); transition: transform .25s, box-shadow .25s; position: relative; }
        .product-card:hover { transform: translateY(-4px); box-shadow: 0 6px 20px rgba(0,0,0,.13); }
        .product-img { width: 100%; height: 220px; object-fit: cover; background: #eee; display: flex; align-items: center; justify-content: center; color: #aaa; font-size: .85rem; }
        .product-img img { width: 100%; height: 100%; object-fit: cover; }
        .product-info { padding: 14px 16px 18px; }
        .product-name { font-size: .95rem; font-weight: 600; margin-bottom: 6px; color: #1a1a2e; }
        /* BUG-024: overflow hidden with no ellipsis for product 7 */
        .product-card:nth-child(7) .product-name { white-space: nowrap; overflow: hidden; max-width: 100px; /* BUG-024: truncated mid-word, no ellipsis */ }
        .product-price { font-size: 1.05rem; font-weight: 700; color: #e94560; }
        .product-price .old-price { text-decoration: line-through; color: #999; font-weight: 400; font-size: .9rem; margin-left: 6px; }
        .product-card .btn-add-cart { display: block; width: 100%; padding: 10px; background: #1a1a2e; color: #fff; border: none; cursor: pointer; font-size: .9rem; font-weight: 600; transition: background .2s; }
        .product-card .btn-add-cart:hover { background: #e94560; }
        .sale-badge { position: absolute; top: 12px; left: 12px; background: #e94560; color: #fff; padding: 4px 10px; border-radius: 4px; font-size: .75rem; font-weight: 700; }
        /* BUG-025: sale badge on product 6 off-screen */
        .product-card:nth-child(6) .sale-badge { left: 350px; /* BUG-025: positioned off-screen */ }
        .review-link { display: inline-block; margin-top: 6px; font-size: .8rem; color: #e94560; }
        .show-more-wrap { text-align: center; padding: 20px 0 40px; }
        .btn-show-more { padding: 10px 30px; background: #1a1a2e; color: #fff; border: none; border-radius: 20px; cursor: pointer; font-size: .9rem; }
        .hidden-products { display: none; }

        /* ===== SPECIAL OFFERS ===== */
        .offers-section { background: #fff3f3; padding: 40px; }
        .offers-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 25px; max-width: 1000px; margin: 0 auto; }

        /* ===== NEWSLETTER ===== */
        .newsletter { background: #1a1a2e; color: #fff; text-align: center; padding: 50px 30px; }
        .newsletter h2 { margin-bottom: 10px; font-size: 1.4rem; }
        .newsletter p { color: #aaa; margin-bottom: 20px; }
        .newsletter-form { display: flex; justify-content: center; gap: 10px; }
        .newsletter-form input { padding: 10px 18px; border: none; border-radius: 20px; width: 300px; font-size: .95rem; }
        .newsletter-form button { padding: 10px 24px; background: #e94560; color: #fff; border: none; border-radius: 20px; cursor: pointer; font-weight: 600; }

        /* ===== MODAL ===== */
        .modal-overlay { display: none; position: fixed; inset: 0; background: rgba(0,0,0,.55); z-index: 2000; align-items: center; justify-content: center; }
        .modal-overlay.open { display: flex; }
        .modal { background: #fff; border-radius: 12px; padding: 35px 30px; width: 400px; max-width: 92%; position: relative; }
        .modal h2 { margin-bottom: 20px; color: #1a1a2e; }
        .modal .close-btn { position: absolute; top: 12px; right: 16px; font-size: 1.5rem; background: none; border: none; cursor: pointer; color: #666; }
        .modal label { display: block; margin-bottom: 4px; font-size: .85rem; font-weight: 600; color: #555; }
        .modal input { width: 100%; padding: 9px 12px; margin-bottom: 14px; border: 1px solid #ddd; border-radius: 6px; }
        .modal .btn-submit { width: 100%; padding: 10px; background: #e94560; color: #fff; border: none; border-radius: 6px; font-size: 1rem; font-weight: 600; cursor: pointer; }
        .modal .btn-submit:hover { background: #c73651; }

        /* ===== REGISTRATION ===== */
        .register-section { max-width: 560px; margin: 40px auto; background: #fff; padding: 35px; border-radius: 12px; box-shadow: 0 2px 12px rgba(0,0,0,.08); }
        .register-section h2 { margin-bottom: 20px; color: #1a1a2e; }
        .form-group { margin-bottom: 14px; }
        .form-group label { display: block; margin-bottom: 4px; font-size: .85rem; font-weight: 600; color: #555; }
        .form-group input, .form-group select { width: 100%; padding: 9px 12px; border: 1px solid #ddd; border-radius: 6px; }
        .required-star { color: #e94560; }
        .register-section .btn-submit { padding: 12px 30px; background: #e94560; color: #fff; border: none; border-radius: 6px; font-size: 1rem; font-weight: 600; cursor: pointer; }

        /* ===== CART ===== */
        .cart-section { max-width: 800px; margin: 40px auto; background: #fff; padding: 35px; border-radius: 12px; box-shadow: 0 2px 12px rgba(0,0,0,.08); }
        .cart-section h2 { margin-bottom: 20px; color: #1a1a2e; }
        .cart-table { width: 100%; border-collapse: collapse; }
        .cart-table th, .cart-table td { padding: 12px; text-align: left; border-bottom: 1px solid #eee; }
        .cart-table th { background: #f9f9f9; font-size: .85rem; color: #666; text-transform: uppercase; }
        .cart-table .remove-btn { background: #e94560; color: #fff; border: none; padding: 5px 12px; border-radius: 4px; cursor: pointer; font-size: .8rem; }
        .cart-summary { text-align: right; margin-top: 20px; }
        .cart-summary .total { font-size: 1.3rem; font-weight: 700; color: #1a1a2e; margin-bottom: 15px; }
        .promo-row { display: flex; justify-content: flex-end; gap: 8px; margin-bottom: 15px; }
        .promo-row input { padding: 8px 12px; border: 1px solid #ddd; border-radius: 6px; width: 180px; }
        .promo-row button { padding: 8px 16px; background: #1a1a2e; color: #fff; border: none; border-radius: 6px; cursor: pointer; }
        .promo-msg { text-align: right; color: green; font-size: .85rem; margin-bottom: 10px; display: none; }
        .btn-checkout { padding: 12px 36px; background: #e94560; color: #fff; border: none; border-radius: 25px; font-size: 1rem; font-weight: 600; cursor: pointer; }

        /* ===== FOOTER ===== */
        .site-footer { background: #1a1a2e; color: #ccc; padding: 40px 30px 20px; }
        .footer-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 30px; max-width: 1100px; margin: 0 auto 30px; }
        .footer-col h3 { color: #fff; margin-bottom: 12px; font-size: 1rem; }
        .footer-col a { display: block; color: #aaa; font-size: .85rem; margin-bottom: 6px; transition: color .2s; }
        .footer-col a:hover { color: #e94560; }
        .social-icons { display: flex; gap: 12px; margin-top: 8px; }
        .social-icons a { width: 34px; height: 34px; background: #16213e; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #fff; font-size: .9rem; transition: background .2s; }
        .social-icons a:hover { background: #e94560; }
        .footer-bottom { text-align: center; padding-top: 20px; border-top: 1px solid #2a2a4a; font-size: .8rem; color: #666; }

        /* ===== BUG BADGE ===== */
        .bug-badge { position: fixed; bottom: 20px; right: 20px; background: #e94560; color: #fff; padding: 10px 18px; border-radius: 25px; font-size: .85rem; font-weight: 700; z-index: 9999; box-shadow: 0 3px 12px rgba(233,69,96,.4); }

        /* ===== RESPONSIVE ===== */
        @media (max-width: 900px) { .product-grid, .offers-grid { grid-template-columns: repeat(2, 1fr); } .footer-grid { grid-template-columns: repeat(2, 1fr); } }
        @media (max-width: 550px) { .product-grid, .offers-grid { grid-template-columns: 1fr; } .footer-grid { grid-template-columns: 1fr; } .header-search { display: none; } .hero h1 { font-size: 1.7rem; } }
    </style>
</head>
<body>

<!-- ===== HEADER ===== -->
<header class="site-header">
    <div class="logo">Shop<span>Buggy</span></div>
    <div class="header-search">
        <!-- BUG-021: typo "Serach" instead of "Search" -->
        <form id="searchForm" onsubmit="handleSearch(event)">
            <input type="text" id="searchInput" placeholder="Serach products..."><!-- BUG-021 -->
            <button type="submit">&#128269;</button>
        </form>
    </div>
    <div class="header-actions">
        <a href="#" onclick="openLogin()">Login / Register</a>
        <div class="cart-icon" onclick="showSection('cart')">
            &#128722;
            <!-- BUG-014: cart count hardcoded to 0 and not updated -->
            <span class="cart-count" id="cartCount">0</span><!-- BUG-014 -->
        </div>
    </div>
    <!-- BUG-023: hamburger shown on desktop -->
    <button class="hamburger">&#9776;</button><!-- BUG-023 -->
</header>

<!-- ===== NAVIGATION ===== -->
<nav class="main-nav">
    <ul id="navList">
        <!-- BUG-026: duplicate id="nav-home" -->
        <li><a href="#" id="nav-home" class="active" onclick="showSection('home')">Home</a></li><!-- BUG-026 -->
        <li><a href="#" id="nav-home" onclick="filterCategory('Makeup')">Makeup</a></li><!-- BUG-026: duplicate ID -->
        <!-- BUG-035: clicking Skincare highlights Makeup -->
        <li><a href="#" id="nav-skincare" onclick="filterCategory('Skincare')">Skincare</a></li><!-- BUG-035 -->
        <li><a href="#" id="nav-fragrance" onclick="filterCategory('Fragrance')">Fragrance</a></li>
        <li><a href="#" id="nav-haircare" onclick="filterCategory('Hair Care')">Hair Care</a></li>
        <li><a href="#" id="nav-apparel" onclick="filterCategory('Apparel')">Apparel</a></li>
        <li><a href="#" id="nav-books" onclick="filterCategory('Books')">Books</a></li>
        <li><a href="#" id="nav-sale" onclick="filterCategory('Sale')">Sale</a></li>
    </ul>
</nav>

<!-- ===== HERO ===== -->
<section class="hero" id="sectionHome">
    <h1>Beauty & Lifestyle, Delivered.</h1>
    <p>Discover curated products across Makeup, Skincare, Fragrance, and more.</p>
    <button class="hero-btn" onclick="showSection('home')">Shop Now</button>
</section>

<!-- ===== SORT BAR ===== -->
<div class="sort-bar">
    <!-- BUG-020: sort dropdown does nothing -->
    <select id="sortSelect" onchange="sortProducts()"><!-- BUG-020 -->
        <option value="">Sort By</option>
        <option value="price-asc">Price: Low to High</option>
        <option value="price-desc">Price: High to Low</option>
        <option value="name-asc">Name: A–Z</option>
    </select>
</div>

<!-- ===== FEATURED PRODUCTS ===== -->
<h2 class="section-title">Featured Products</h2>
<p class="section-subtitle">Hand-picked items just for you</p>
<div class="product-grid" id="productGrid">

    <!-- PRODUCT 1 -->
    <div class="product-card" data-category="Makeup">
        <div class="product-img">
            <!-- BUG-036: empty alt -->
            <img src="https://placehold.co/400x400/fce4ec/e94560?text=Bronzer+Stick" alt=""><!-- BUG-036 -->
        </div>
        <div class="product-info">
            <div class="product-name">Skinsheen Bronzer Stick</div>
            <div class="product-price">$29.50</div>
            <!-- BUG-028: dead review link -->
            <a href="#" class="review-link">Write a Review</a><!-- BUG-028 -->
        </div>
        <!-- BUG-038: no aria-label on add to cart -->
        <button class="btn-add-cart" onclick="addToCart('Skinsheen Bronzer Stick', 29.50)">&#128722; Add to Cart</button><!-- BUG-038 -->
    </div>

    <!-- PRODUCT 2 -->
    <div class="product-card" data-category="Makeup">
        <div class="product-img">
            <!-- BUG-019: broken image src -->
            <img src="images/typo_img.jpg" alt=""><!-- BUG-019 + BUG-036 -->
        </div>
        <div class="product-info">
            <span class="sale-badge">SALE</span>
            <div class="product-name">BeneFit Girl Meets Pearl</div>
            <div class="product-price">$19.00 <span class="old-price">$30.00</span></div>
            <a href="#" class="review-link">Write a Review</a><!-- BUG-028 -->
        </div>
        <button class="btn-add-cart" onclick="addToCart('BeneFit Girl Meets Pearl', 19.00)">&#128722; Add to Cart</button>
    </div>

    <!-- PRODUCT 3 -->
    <div class="product-card" data-category="Skincare">
        <div class="product-img">
            <img src="https://placehold.co/400x400/e8f5e9/388e3c?text=Bella+Bamba" alt=""><!-- BUG-036 -->
        </div>
        <div class="product-info">
            <div class="product-name">Benefit Bella Bamba</div>
            <div class="product-price">$28.00</div>
            <a href="#" class="review-link">Write a Review</a><!-- BUG-028 -->
        </div>
        <!-- BUG-011: broken onclick -->
        <button class="btn-add-cart" onclick="addToCrt('Benefit Bella Bamba', 28.00)">&#128722; Add to Cart</button><!-- BUG-011 -->
    </div>

    <!-- PRODUCT 4 -->
    <div class="product-card" data-category="Makeup">
        <div class="product-img">
            <img src="https://placehold.co/400x400/fff3e0/e65100?text=Loose+Bronzer" alt=""><!-- BUG-036 -->
        </div>
        <div class="product-info">
            <div class="product-name">Tropiques Loose Bronzer</div>
            <div class="product-price">$38.50</div>
            <a href="#" class="review-link">Write a Review</a><!-- BUG-028 -->
        </div>
        <button class="btn-add-cart" onclick="addToCart('Tropiques Loose Bronzer', 38.50)">&#128722; Add to Cart</button>
    </div>

    <!-- PRODUCT 5 -->
    <div class="product-card" data-category="Skincare">
        <div class="product-img">
            <img src="https://placehold.co/400x400/e3f2fd/1565c0?text=Eye+Cells" alt=""><!-- BUG-036 -->
        </div>
        <div class="product-info">
            <!-- BUG-015: SALE badge says 10% OFF but new price is HIGHER than original -->
            <span class="sale-badge">10% OFF</span><!-- BUG-015 -->
            <div class="product-name">Absolue Eye Precious Cells</div>
            <div class="product-price">$110.00 <span class="old-price">$105.00</span></div><!-- BUG-015 -->
            <a href="#" class="review-link">Write a Review</a><!-- BUG-028 -->
        </div>
        <button class="btn-add-cart" onclick="addToCart('Absolue Eye Precious Cells', 110.00)">&#128722; Add to Cart</button>
    </div>

    <!-- PRODUCT 6 -->
    <div class="product-card" data-category="Skincare">
        <div class="product-img">
            <img src="https://placehold.co/400x400/fce4ec/ad1457?text=Moisture+Cream" alt=""><!-- BUG-036 -->
        </div>
        <div class="product-info">
            <!-- BUG-025: sale badge off-screen via CSS -->
            <span class="sale-badge">SALE</span><!-- BUG-025 -->
            <div class="product-name">Total Moisture Facial Cream</div>
            <div class="product-price">$38.00</div>
            <a href="#" class="review-link">Write a Review</a><!-- BUG-028 -->
        </div>
        <button class="btn-add-cart" onclick="addToCart('Total Moisture Facial Cream', 38.00)">&#128722; Add to Cart</button>
    </div>

    <!-- PRODUCT 7 -->
    <div class="product-card" data-category="Skincare">
        <div class="product-img">
            <img src="https://placehold.co/400x400/e0f7fa/00695c?text=Body+Gel" alt=""><!-- BUG-036 -->
        </div>
        <div class="product-info">
            <span class="sale-badge">SALE</span>
            <!-- BUG-024: name truncated via CSS, no ellipsis -->
            <div class="product-name">Flash Bronzer Body Gel</div><!-- BUG-024 -->
            <div class="product-price">$29.00 <span class="old-price">$34.50</span></div>
            <a href="#" class="review-link">Write a Review</a><!-- BUG-028 -->
        </div>
        <button class="btn-add-cart" onclick="addToCart('Flash Bronzer Body Gel', 29.00)">&#128722; Add to Cart</button>
    </div>

    <!-- PRODUCT 8 -->
    <div class="product-card" data-category="Fragrance">
        <div class="product-img">
            <img src="https://placehold.co/400x400/ede7f6/4a148c?text=Acqua+Di+Gio" alt=""><!-- BUG-036 -->
        </div>
        <div class="product-info">
            <span class="sale-badge">SALE</span>
            <div class="product-name">Acqua Di Gio Pour Homme</div>
            <!-- BUG-018: currency inconsistency €45.00 vs $ -->
            <div class="product-price">€45.00 <span class="old-price">$59.00</span></div><!-- BUG-018 -->
            <a href="#" class="review-link">Write a Review</a><!-- BUG-028 -->
        </div>
        <button class="btn-add-cart" onclick="addToCart('Acqua Di Gio Pour Homme', 45.00)">&#128722; Add to Cart</button>
    </div>
</div>

<!-- Show More -->
<div class="show-more-wrap">
    <!-- BUG-033: button label never changes to "Show Less" -->
    <button class="btn-show-more" onclick="toggleMore()">Show More</button><!-- BUG-033 -->
</div>
<div class="hidden-products" id="hiddenProducts">
    <div class="product-grid">
        <div class="product-card" data-category="Hair Care">
            <div class="product-img"><img src="https://placehold.co/400x400/f3e5f5/7b1fa2?text=Hair+Serum" alt=""></div>
            <div class="product-info"><div class="product-name">Silk Repair Hair Serum</div><div class="product-price">$22.00</div></div>
            <button class="btn-add-cart" onclick="addToCart('Silk Repair Hair Serum', 22.00)">&#128722; Add to Cart</button>
        </div>
        <div class="product-card" data-category="Apparel">
            <div class="product-img"><img src="https://placehold.co/400x400/efebe9/4e342e?text=Cotton+Tee" alt=""></div>
            <div class="product-info"><div class="product-name">Classic Cotton Tee</div><div class="product-price">$18.00</div></div>
            <button class="btn-add-cart" onclick="addToCart('Classic Cotton Tee', 18.00)">&#128722; Add to Cart</button>
        </div>
    </div>
</div>

<!-- ===== SPECIAL OFFERS ===== -->
<section class="offers-section">
    <h2 class="section-title">Special Offers</h2>
    <p class="section-subtitle">Limited-time deals you don't want to miss</p>
    <div class="offers-grid">
        <div class="product-card">
            <div class="product-img"><img src="https://placehold.co/400x400/fce4ec/e94560?text=Lip+Gloss" alt=""></div>
            <div class="product-info"><span class="sale-badge">20% OFF</span><div class="product-name">Velvet Lip Gloss Set</div><div class="product-price">$16.00 <span class="old-price">$20.00</span></div></div>
            <button class="btn-add-cart" onclick="addToCart('Velvet Lip Gloss Set', 16.00)">&#128722; Add to Cart</button>
        </div>
        <div class="product-card">
            <div class="product-img"><img src="https://placehold.co/400x400/e8eaf6/283593?text=Night+Cream" alt=""></div>
            <div class="product-info"><span class="sale-badge">15% OFF</span><div class="product-name">Radiance Night Cream</div><div class="product-price">$34.00 <span class="old-price">$40.00</span></div></div>
            <button class="btn-add-cart" onclick="addToCart('Radiance Night Cream', 34.00)">&#128722; Add to Cart</button>
        </div>
        <div class="product-card">
            <div class="product-img"><img src="https://placehold.co/400x400/e0f2f1/00695c?text=Body+Lotion" alt=""></div>
            <div class="product-info"><span class="sale-badge">25% OFF</span><div class="product-name">Hydra Body Lotion</div><div class="product-price">$12.00 <span class="old-price">$16.00</span></div></div>
            <button class="btn-add-cart" onclick="addToCart('Hydra Body Lotion', 12.00)">&#128722; Add to Cart</button>
        </div>
    </div>
</section>

<!-- ===== NEWSLETTER ===== -->
<section class="newsletter">
    <h2>Stay in the Loop</h2>
    <p>Subscribe to get exclusive offers and beauty tips straight to your inbox.</p>
    <div class="newsletter-form">
        <input type="email" placeholder="Enter your email" id="newsletterEmail">
        <!-- BUG-007: subscribe button does nothing -->
        <button id="subscribeBtn">Subscribe</button><!-- BUG-007: no event listener attached -->
    </div>
</section>

<!-- ===== LOGIN MODAL ===== -->
<div class="modal-overlay" id="loginModal">
    <div class="modal">
        <!-- BUG-030: close button also submits form -->
        <button class="close-btn" onclick="closeLoginAndSubmit()">&#10005;</button><!-- BUG-030 -->
        <h2>Login</h2>
        <!-- BUG-001: form submits even when empty -->
        <form id="loginForm" onsubmit="handleLogin(event)">
            <!-- BUG-037: label for doesn't match input id -->
            <label for="username">Email Address</label><!-- BUG-037 -->
            <input type="text" id="loginEmail" placeholder="you@example.com">
            <label for="pwd">Password</label><!-- BUG-037 -->
            <!-- BUG-009: password field is type="text" -->
            <input type="text" id="loginPassword" placeholder="Password"><!-- BUG-009 -->
            <button type="submit" class="btn-submit">Login</button><!-- BUG-001 -->
        </form>
        <p style="text-align:center;margin-top:12px;font-size:.85rem;color:#888;">Don't have an account? <a href="#registration" style="color:#e94560;" onclick="closeLogin();showSection('register')">Register</a></p>
    </div>
</div>

<!-- ===== REGISTRATION FORM ===== -->
<section class="register-section" id="sectionRegister" style="display:none;">
    <h2>Create an Account</h2>
    <form id="registerForm" onsubmit="handleRegister(event)">
        <div class="form-group">
            <!-- BUG-037: label for doesn't match -->
            <label for="fname">First Name <span class="required-star">*</span></label><!-- BUG-037 -->
            <!-- BUG-005: maxlength="2" -->
            <input type="text" id="regFirstName" maxlength="2" required><!-- BUG-005 -->
        </div>
        <div class="form-group">
            <label for="lname">Last Name <span class="required-star">*</span></label>
            <input type="text" id="regLastName" required>
        </div>
        <div class="form-group">
            <!-- BUG-006: asterisk shown but not required -->
            <label for="mname">Middle Name <span class="required-star">*</span></label><!-- BUG-006 -->
            <input type="text" id="regMiddleName"><!-- BUG-006: not actually required -->
        </div>
        <div class="form-group">
            <!-- BUG-002: no email validation -->
            <label for="regemail">Email <span class="required-star">*</span></label><!-- BUG-037 -->
            <input type="text" id="regEmail" required><!-- BUG-002: type="text" instead of type="email" -->
        </div>
        <div class="form-group">
            <label for="regphone">Phone Number</label><!-- BUG-037 -->
            <!-- BUG-004: phone accepts letters -->
            <input type="text" id="regPhone"><!-- BUG-004 -->
        </div>
        <div class="form-group">
            <!-- BUG-010: no max date on DOB -->
            <label for="dob">Date of Birth</label><!-- BUG-037 -->
            <input type="date" id="regDOB"><!-- BUG-010 -->
        </div>
        <div class="form-group">
            <label for="regpwd">Password <span class="required-star">*</span></label>
            <input type="password" id="regPassword" required>
        </div>
        <div class="form-group">
            <!-- BUG-003: no match check -->
            <label for="regcpwd">Confirm Password <span class="required-star">*</span></label>
            <input type="password" id="regConfirmPassword" required><!-- BUG-003 -->
        </div>
        <!-- BUG-008: button says "Reset" instead of "Submit" -->
        <button type="submit" class="btn-submit" value="Reset">Reset</button><!-- BUG-008 -->
    </form>
</section>

<!-- ===== CART SECTION ===== -->
<section class="cart-section" id="sectionCart" style="display:none;">
    <h2>Your Shopping Cart</h2>
    <table class="cart-table">
        <thead>
            <tr><th>Product</th><th>Price</th><th>Quantity</th><th>Subtotal</th><th></th></tr>
        </thead>
        <tbody id="cartBody"></tbody>
    </table>
    <div class="promo-row">
        <input type="text" id="promoInput" placeholder="Promo code">
        <!-- BUG-034: promo code shows success but doesn't discount -->
        <button onclick="applyPromo()">Apply</button><!-- BUG-034 -->
    </div>
    <div class="promo-msg" id="promoMsg">&#10003; Code "SAVE10" applied successfully!</div><!-- BUG-034 -->
    <div class="cart-summary">
        <div class="total" id="cartTotal">Total: $0.00</div>
        <!-- BUG-017: checkout navigates to # -->
        <a href="#"><button class="btn-checkout">Proceed to Checkout</button></a><!-- BUG-017 -->
    </div>
</section>

<!-- ===== FOOTER ===== -->
<footer class="site-footer">
    <div class="footer-grid">
        <div class="footer-col">
            <h3>Shop<span style="color:#e94560;">Buggy</span></h3>
            <p style="font-size:.85rem;color:#888;margin-top:6px;">Your one-stop beauty & lifestyle store. Quality products, great prices.</p>
        </div>
        <div class="footer-col">
            <h3>Quick Links</h3>
            <a href="#">About Us</a>
            <a href="#">Contact</a>
            <a href="#">FAQs</a>
            <a href="#">Careers</a>
        </div>
        <div class="footer-col">
            <h3>Policies</h3>
            <a href="#">Privacy Policy</a>
            <a href="#">Return Policy</a>
            <a href="#">Terms of Service</a>
            <a href="#">Shipping Info</a>
        </div>
        <div class="footer-col">
            <h3>Follow Us</h3>
            <div class="social-icons">
                <a href="#">f</a>
                <a href="#">t</a>
                <a href="#">in</a>
                <a href="#">ig</a>
            </div>
        </div>
    </div>
    <!-- BUG-022: copyright year hardcoded as 2018 -->
    <div class="footer-bottom">&copy; 2018 ShopBuggy. All rights reserved.</div><!-- BUG-022 -->
</footer>

<!-- ===== BUG COUNT BADGE ===== -->
<div class="bug-badge">&#128027; Bug Count: 38</div>

<!-- ===== HIDDEN ANSWER KEY ===== -->
<div id="bug-answer-key" style="display:none;">
[
  {"id":"BUG-001","description":"Login form submits successfully even when both fields are empty"},
  {"id":"BUG-002","description":"Email field in registration accepts invalid formats — no validation"},
  {"id":"BUG-003","description":"Password and Confirm Password fields do not check if they match"},
  {"id":"BUG-004","description":"Phone number field accepts alphabetical characters"},
  {"id":"BUG-005","description":"First Name field has maxlength=2 — only 2 characters allowed"},
  {"id":"BUG-006","description":"Required asterisk on Middle Name but the field is not actually required"},
  {"id":"BUG-007","description":"Newsletter subscribe button does nothing — no event listener"},
  {"id":"BUG-008","description":"Registration Submit button label says Reset"},
  {"id":"BUG-009","description":"Login password field is type=text — password is visible"},
  {"id":"BUG-010","description":"Date of Birth field accepts future dates with no max constraint"},
  {"id":"BUG-011","description":"Add to Cart on Product 3 calls nonexistent function addToCrt()"},
  {"id":"BUG-012","description":"Cart total adds an extra copy of the last item price"},
  {"id":"BUG-013","description":"Removing item decreases count but subtotal does not update"},
  {"id":"BUG-014","description":"Cart badge in header always shows 0"},
  {"id":"BUG-015","description":"Product 5 sale badge says 10% OFF but new price is higher than original"},
  {"id":"BUG-016","description":"Cart quantity input allows 0 and negative numbers"},
  {"id":"BUG-017","description":"Checkout button navigates to # instead of checkout"},
  {"id":"BUG-018","description":"Product 8 uses € while all others use $"},
  {"id":"BUG-019","description":"Product 2 has a broken image src"},
  {"id":"BUG-020","description":"Sort dropdown does not re-sort products"},
  {"id":"BUG-021","description":"Search bar placeholder has typo: Serach instead of Search"},
  {"id":"BUG-022","description":"Footer copyright year hardcoded as 2018"},
  {"id":"BUG-023","description":"Hamburger menu visible on desktop — uses min-width instead of max-width"},
  {"id":"BUG-024","description":"Product 7 name truncated mid-word with no ellipsis"},
  {"id":"BUG-025","description":"Sale badge on Product 6 positioned off-screen"},
  {"id":"BUG-026","description":"Two nav links both have id=nav-home (duplicate IDs)"},
  {"id":"BUG-027","description":"Page title says Untitled Document"},
  {"id":"BUG-028","description":"Write Review links are dead href=# links"},
  {"id":"BUG-029","description":"Search clears input before redirect"},
  {"id":"BUG-030","description":"Modal close button also submits login form silently"},
  {"id":"BUG-031","description":"Add to Cart adds duplicate entries instead of incrementing quantity"},
  {"id":"BUG-032","description":"console.error triggered on page load from undefined.property"},
  {"id":"BUG-033","description":"Show More button label never changes to Show Less"},
  {"id":"BUG-034","description":"Promo code SAVE10 shows success but does not reduce total"},
  {"id":"BUG-035","description":"Clicking Skincare highlights Makeup as active"},
  {"id":"BUG-036","description":"All product images have empty alt attributes"},
  {"id":"BUG-037","description":"Form labels for attributes do not match input ids"},
  {"id":"BUG-038","description":"Add to Cart buttons have no aria-label — icon only not accessible"}
]
</div>

<!-- ===== JAVASCRIPT ===== -->
<script>
    // BUG-032: deliberate console.error on page load
    try {
        var x = undefined;
        x.property; // BUG-032
    } catch(e) {
        console.error('BUG-032: Uncaught reference -', e.message);
    }

    // ===== CART STATE =====
    var cart = [];

    // ===== SECTION SWITCHING =====
    function showSection(section) {
        document.getElementById('sectionRegister').style.display = 'none';
        document.getElementById('sectionCart').style.display = 'none';
        document.getElementById('sectionHome').style.display = '';
        document.querySelector('.sort-bar').style.display = '';
        document.querySelector('.product-grid').style.display = '';
        document.querySelector('.show-more-wrap').style.display = '';
        document.querySelector('.offers-section').style.display = '';
        document.querySelector('.newsletter').style.display = '';

        if (section === 'register') {
            document.getElementById('sectionHome').style.display = 'none';
            document.querySelector('.sort-bar').style.display = 'none';
            document.querySelector('.product-grid').style.display = 'none';
            document.querySelector('.show-more-wrap').style.display = 'none';
            document.querySelector('.offers-section').style.display = 'none';
            document.querySelector('.newsletter').style.display = 'none';
            document.getElementById('sectionRegister').style.display = '';
        } else if (section === 'cart') {
            document.getElementById('sectionHome').style.display = 'none';
            document.querySelector('.sort-bar').style.display = 'none';
            document.querySelector('.product-grid').style.display = 'none';
            document.querySelector('.show-more-wrap').style.display = 'none';
            document.querySelector('.offers-section').style.display = 'none';
            document.querySelector('.newsletter').style.display = 'none';
            document.getElementById('sectionCart').style.display = '';
            renderCart();
        }
    }

    // ===== LOGIN MODAL =====
    function openLogin() {
        document.getElementById('loginModal').classList.add('open');
    }
    function closeLogin() {
        document.getElementById('loginModal').classList.remove('open');
    }
    // BUG-030: close button also submits login form
    function closeLoginAndSubmit() {
        document.getElementById('loginForm').requestSubmit(); // BUG-030
        closeLogin();
    }

    // BUG-001: login form submits even when empty
    function handleLogin(e) {
        e.preventDefault();
        // BUG-001: no validation at all
        alert('Login successful!');
        closeLogin();
    }

    // ===== REGISTRATION =====
    // BUG-002, BUG-003: no email validation, no password match check
    function handleRegister(e) {
        e.preventDefault();
        // BUG-002: no email format check
        // BUG-003: no password match check
        // BUG-004: no phone number validation
        alert('Registration successful!');
    }

    // ===== SEARCH =====
    // BUG-029: clears input before redirect
    function handleSearch(e) {
        e.preventDefault();
        var input = document.getElementById('searchInput');
        var query = input.value;
        input.value = ''; // BUG-029: clears text before using it
        if (query) {
            window.location.href = '#search?q=' + encodeURIComponent(query);
        }
    }

    // ===== CART FUNCTIONS =====
    // BUG-031: adds duplicate entries instead of incrementing
    function addToCart(name, price) {
        // BUG-031: always pushes new entry, never checks if item exists
        cart.push({ name: name, price: price, qty: 1 });
        // BUG-014: we intentionally do NOT update cartCount display
        alert(name + ' added to cart!');
    }

    function renderCart() {
        var tbody = document.getElementById('cartBody');
        tbody.innerHTML = '';
        var total = 0;
        for (var i = 0; i < cart.length; i++) {
            var item = cart[i];
            var subtotal = item.price * item.qty;
            total += subtotal;
            var tr = document.createElement('tr');
            tr.innerHTML =
                '<td>' + item.name + '</td>' +
                '<td>$' + item.price.toFixed(2) + '</td>' +
                // BUG-016: no min constraint on quantity input
                '<td><input type="number" value="' + item.qty + '" style="width:60px;padding:4px;" onchange="updateQty(' + i + ', this.value)"></td>' + // BUG-016
                '<td>$' + subtotal.toFixed(2) + '</td>' +
                '<td><button class="remove-btn" onclick="removeItem(' + i + ')">Remove</button></td>';
            tbody.appendChild(tr);
        }
        // BUG-012: add extra copy of last item price
        if (cart.length > 0) {
            total += cart[cart.length - 1].price; // BUG-012
        }
        document.getElementById('cartTotal').textContent = 'Total: $' + total.toFixed(2);
    }

    function updateQty(index, val) {
        // BUG-016: no min=1 check
        cart[index].qty = parseInt(val) || 0;
        renderCart();
    }

    // BUG-013: removes item from array but doesn't re-render totals properly
    function removeItem(index) {
        cart.splice(index, 1);
        // BUG-013: only update display count, don't call renderCart to fix subtotal
        var tbody = document.getElementById('cartBody');
        tbody.deleteRow(index);
        // Subtotal is NOT recalculated — BUG-013
    }

    // BUG-034: promo code shows success but doesn't apply discount
    function applyPromo() {
        var code = document.getElementById('promoInput').value.trim();
        if (code === 'SAVE10') {
            document.getElementById('promoMsg').style.display = 'block'; // BUG-034: shows message only
            // Total is NOT reduced
        } else {
            alert('Invalid promo code.');
        }
    }

    // ===== SORT (BUG-020) =====
    function sortProducts() {
        // BUG-020: does nothing
        return;
    }

    // ===== CATEGORY FILTER =====
    // BUG-035: clicking Skincare highlights Makeup
    function filterCategory(cat) {
        var links = document.querySelectorAll('.main-nav a');
        links.forEach(function(l) { l.classList.remove('active'); });
        // BUG-035: always highlight Makeup (index 1) instead of the clicked link
        if (cat === 'Skincare') {
            links[1].classList.add('active'); // BUG-035: highlights Makeup
        } else {
            links.forEach(function(l) {
                if (l.textContent === cat) l.classList.add('active');
            });
        }
    }

    // ===== SHOW MORE (BUG-033) =====
    function toggleMore() {
        var el = document.getElementById('hiddenProducts');
        if (el.style.display === 'none' || el.style.display === '') {
            el.style.display = 'block';
        } else {
            el.style.display = 'none';
        }
        // BUG-033: button label never changes
    }

    // BUG-007: subscribe button — no event listener attached at all
    // (intentionally NOT adding addEventListener to subscribeBtn)
</script>

</body>
</html>
